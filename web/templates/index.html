{{define "content"}}
<div class="btn-group w-100 mb-4" role="group" aria-label="Encryption type">
  <button type="button" class="btn btn-primary" id="textToggle" onclick="toggleEncryptionType('text')">Text
    Encryption</button>
  <button type="button" class="btn btn-outline-primary" id="fileToggle" onclick="toggleEncryptionType('file')">File
    Encryption</button>
</div>

<!-- Text Encryption Form -->
<div id="textForm">
  <form onsubmit="postSecret(event)" id="form" class="p-3 form-signin">
    <div class="form-group">
      <label for="secretText" class="form-label">Secret Content:</label>
      <textarea type="text" id="secretText" name="secret" class="form-control" autocomplete="off"
        placeholder="Enter your secret message, password, or link..." rows="4"
        aria-label="Secret content to encrypt"></textarea>
    </div>
    <div class="form-group">
      <label for="ViewCount" class="form-label">View Count:</label>
      <select name="view_count" class="form-control form-select" id="ViewCount"
        aria-label="Number of times the secret can be viewed">
        <option selected>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
        <option>8</option>
        <option>9</option>
        <option>10</option>
      </select>
    </div>
    <div class="form-group">
      <label for="TTLDays" class="form-label">Days Before Expiration:</label>
      <select name="ttl_days" class="form-control form-select" id="TTLDays"
        aria-label="Number of days before the secret expires">
        <option>1</option>
        <option>3</option>
        <option selected>7</option>
        <option>14</option>
        <option>30</option>
      </select>
    </div>

    {{if .AdvancedFeatures}}
    <div class="form-group">
      <button class="btn btn-link text-decoration-none p-0 mb-2 text-muted" type="button" data-bs-toggle="collapse"
        data-bs-target="#advancedOptions" aria-expanded="false" aria-controls="advancedOptions">
        ▸ I know what I'm doing
      </button>
      <div class="collapse" id="advancedOptions">
        <div class="form-check mb-2">
          <input class="form-check-input" type="checkbox" id="disableTTL" name="disable_ttl">
          <label class="form-check-label" for="disableTTL">
            Disable expiration (secret never expires)
          </label>
        </div>
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" id="disableViewCount" name="disable_view_count">
          <label class="form-check-label" for="disableViewCount">
            Disable view count (only rely on expiration)
          </label>
        </div>
        <div class="form-group">
          <label for="exactTTL" class="form-label">Or set exact expiration date/time:</label>
          <input type="datetime-local" class="form-control" id="exactTTL" name="exact_ttl">
          <small class="form-text text-muted">Leave empty to use days before expiration above</small>
        </div>
      </div>
    </div>
    {{end}}

    <div class="form-group">
      <button type="submit" class="btn btn-primary w-100" id="submitBtn" aria-label="Create secret link">
        <span id="submitBtnText">Create Secret Link</span>
      </button>
    </div>
  </form>
</div>

<!-- File Encryption Form -->
<div id="fileForm" style="display: none;">
  <form onsubmit="postSecretFile(event)" id="fileFormElement" class="pt-3 px-3 form-signin">
    <div class="mb-3 form-group">
      <label for="file" class="form-label">Select File:</label>
      <input class="form-control" id="file" ref="file" type="file" aria-label="File to encrypt (max 10MB)">
      <small class="form-text text-muted">Maximum file size: 10MB</small>
    </div>

    {{if .AdvancedFeatures}}
    <div class="form-group">
      <button class="btn btn-link text-decoration-none p-0 mb-2 text-muted" type="button" data-bs-toggle="collapse"
        data-bs-target="#advancedOptionsFile" aria-expanded="false" aria-controls="advancedOptionsFile">
        ▸ I know what I'm doing
      </button>
      <div class="collapse" id="advancedOptionsFile">
        <div class="form-check mb-2">
          <input class="form-check-input" type="checkbox" id="disableTTLFile" name="disable_ttl">
          <label class="form-check-label" for="disableTTLFile">
            Disable expiration (file never expires)
          </label>
        </div>
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" id="disableViewCountFile" name="disable_view_count">
          <label class="form-check-label" for="disableViewCountFile">
            Disable view count (only rely on expiration)
          </label>
        </div>
        <div class="form-group">
          <label for="exactTTLFile" class="form-label">Or set exact expiration date/time:</label>
          <input type="datetime-local" class="form-control" id="exactTTLFile" name="exact_ttl">
          <small class="form-text text-muted">Leave empty for default 7 day expiration</small>
        </div>
      </div>
    </div>
    {{end}}

    <br />
    <div class="form-group d-grid gap-2">
      <button type="submit" class="btn btn-primary" id="submitBtnFile" aria-label="Create secret link for file">
        <span id="submitBtnFileText">Create Secret Link</span>
      </button>
    </div>
  </form>
</div>

{{end}}
